<html>

<head>

<link rel="stylesheet" type="text/css" href="./node_modules/bulma/css/bulma.css">
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
<script src="https://simplewebrtc.com/latest-v3.js"></script>

</head>

<body>

  <!-- Header/Title -->
  <div id="app">
  <section class="hero is-primary is-bold">
  <div class="hero-body">
    <div class="container">
      <h1 class="title is-size-1">
        {{ message }}
      </h1>
    </div>
  </div>
</section>

  <!-- First page -->
  <div v-if="!room_id && !peerIsReady" class="container has-text-centered">
  <!-- Invite button -->
  <br><br><br><br><br><br><br><br>
  <a v-on:click="invite" class="button is-medium is-link has-text-weight-semibold">Click to invite a friend!</a>

  <!-- Product copy -->
  <div class="menu has-text-centered has-text-grey"><br><br><br><br><br><br><br>
    <p class="has-text-weight-semibold">Why File Friend?</p>
    <ul class='menu-list'>
      <li>We do secure, peer-to-peer transfers!</li>
      <li>There is NO third party and NO security risk!</li>
    </ul>
  </div>
</div>
<!-- End first page -->

  <!-- Loading page to show after room id is generated (Hide previous)-->
  <div v-if="room_id && !peerIsReady" class="container has-text-centered">

  <p class="is-size-5 has-text-weight-semibold"><br><br><br>Waiting for your friend to connect!<br><br><br></p>

  <!-- Spinner icon -->
  <span class="icon is-large has-text-primary">
    <i class="fas fa-spinner fa-3x fa-pulse"></i>
  </span>

  </div>
  <!-- End loading page -->

  <!-- File upload page to show when peer is ready (Hides previous)-->
  <section class="section">
    <div v-if="peerIsReady">
      <div class="content has-text-centered">

        <h2><br>Connection complete!<br><br></h2>
        <p>Your friend has connected! Now choose the file you would like to transfer.<br><br></p>

        <div class="file is-centered">
          <!-- File Input Button -->
          <label class="file-label">
          <input class="file-input" type="file" name="resume" @change = "onFileChange"><br><br><br>
          <span class="file-cta">
            <span class="file-icon">
              <i class="fas fa-upload"></i>
            </span>
            <span class="file-label">
              Choose a file...
            </span>
          </span>
        </label>
      </div>

    </div>

    <div class="columns">
      <div class="column is-half has-text-centered">
        <!-- To make the column colored: notification is-primary -->
       <h1><strong>Sent Files</strong></h1>
        <!-- Dynamic progress bar -->
        <div v-for="sentFile in sentFiles">
          <div>
            <!-- Show checkbox if file is fully sent -->
            <p><span v-if="sentFile.complete" class="icon has-text-primary">
              <i class="fas fa-check-square"></i>
            </span>
            {{ sentFile.name }}</p>
            <progress v-if="!sentFile.complete" class="progress is-primary" v-bind:value="sentFile.bytesSent" v-bind:max="sentFile.size"></progress>
          </div>
        </div>
      </div>
      <div class="column is-half has-text-centered">
        <h1><strong>Received Files</strong></h1>
          <div v-for="receivedFile in receivedFiles">
            <a v-bind:download=receivedFile.name v-bind:href=receivedFile.file>{{ receivedFile.name }}</a>
          </div>
      </div>
    </div>


    </div>
  </section>

</div>

<script src="index.js"></script>

</body>
</html>
